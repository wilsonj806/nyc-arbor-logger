(this["webpackJsonpnyc-arbor-logger"]=this["webpackJsonpnyc-arbor-logger"]||[]).push([[0],{73:function(e,t,a){e.exports=a(84)},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),s=(a(78),a(16)),l=a(51),u=a(2),i={endpoint:"",message:""},p=Object(n.createContext)({state:i,updateMessageFn:function(e){return console.log("hi")},updateEndpointFn:function(e){return console.log("hi")}});function d(e,t){var a=t.type,n=Object(l.a)(t,["type"]);switch(a){case"UPDATE_ENDPOINT":return Object(s.a)({},e,{endpoint:n.payload});case"UPDATE_MESSAGE":return Object(s.a)({},e,{message:n.payload});default:return e}}var f=function(e){var t=e.children,a=Object(n.useReducer)(d,i),c=Object(u.a)(a,2),o=c[0],s=c[1],l=function(e){return function(t){return e({type:"UPDATE_ENDPOINT",payload:t})}}(s),f=function(e){return function(t){return e({type:"UPDATE_MESSAGE",payload:t})}}(s);return r.a.createElement(p.Provider,{value:{state:o,updateMessageFn:f,updateEndpointFn:l}},t)},m=(a(79),[{text:"Select Boro",path:""},{text:"Bronx",path:"/data/bronx/species"},{text:"Brooklyn",path:"/data/brooklyn/species"},{text:"Manhattan",path:"/data/manhattan/species"},{text:"Queens",path:"/data/manhattan/species"},{text:"Staten Island",path:"/data/staten%20island/species"}]),h=function(e){var t=Object(n.useContext)(p).updateEndpointFn,a=Object(n.useState)(""),c=Object(u.a)(a,2),o=c[0],s=c[1],l=Object(n.useState)(!1),i=Object(u.a)(l,2),d=i[0],f=i[1],h=function(e){var t=e.target;"true"===t.value?f(!0):"true"!==t.dataset.secondary&&d?(f(!1),s(t.value)):s(t.value)},b=e.graph_options.map((function(e,t){return r.a.createElement("option",{value:e.isSecondary||e.path,key:t},e.text)})),g=d?r.a.createElement("label",{className:"label--select"},r.a.createElement("span",null,"Choose a Borough:"),r.a.createElement("select",{className:"select--primary",onChange:h,"data-secondary":!0},m.map((function(e,t){return r.a.createElement("option",{value:e.path,key:t},e.text)})))):null;return r.a.createElement("div",{className:"ctr-nav"},r.a.createElement("nav",null,r.a.createElement("form",{"data-nav":"navigation-form"},r.a.createElement("label",{className:"label--select"},"Choose an option:",r.a.createElement("select",{className:"select--primary",onChange:h},b)),g,r.a.createElement("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),t(o)}},"Go"))))};h.defaultProps={graph_options:[Object.assign({},{text:"Select an option",path:""}),Object.assign({},{text:"Qty Trees Per Borough",path:"/data/count"}),Object.assign({},{text:"Qty of Each Tree Species",path:"/data/species"}),Object.assign({},{text:"Qty of Each Tree Species in a Borough",path:"",isSecondary:"true"})]};var b=h,g=(a(80),function(){return r.a.createElement("div",{className:"wrap-spinner"},r.a.createElement("div",{className:"spinner"}),r.a.createElement("p",null,"Loading..."))}),E=a(5),y=a(17),v=a.n(y),x=a(49),j=a(1),O=a(50);function w(e){return e.charAt(0).toUpperCase()+e.slice(1)}var k=function(e,t,a){return function(n){var r=Object(O.a)(n);j.h("svg").attr("width","0").remove();var c=20,o=110,s=80,l=150,u=960-l-o,i=(n.length>30?18*n.length:500)-c-s,p=j.d().range([i,0]).padding(.1),d=j.e().range([0,u]),f=j.h(a).append("svg").attr("width",u+l+o).attr("height",i+c+s).append("g").attr("transform","translate("+l+","+c+")");d.domain([0,j.c(r,(function(t){return t[e]}))]),p.domain(r.map((function(e){return e[t]})));var m=f.selectAll(".bar").data(r,(function(e){return e})),h=j.f(j.g);m.enter().append("rect").attr("class","bar").attr("fill",(function(e,t){return h(t)})).attr("width",(function(t){return d(t[e])})).attr("y",(function(e){return p(e[t])})).attr("height",p.bandwidth()),m.exit().remove(),f.append("g").attr("transform","translate(0,"+i+")").call(j.a(d)),f.append("text").attr("transform","translate("+u/2+" ,"+(i+c+20)+")").style("text-anchor","middle").text(w(e)),f.append("g").call(j.b(p)),f.append("text").attr("transform","rotate(-90)").attr("y",0-.85*l).attr("x",0-i/2).attr("dy","1em").style("text-anchor","middle").text(w(t))}};function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(e){case"/data/count":return{xKey:"count",yKey:"boro"};case"/data/species":return{xKey:"count",yKey:"species"};case"/data/brooklyn/species":case"/data/bronx/species":case"/data/queens/species":case"/data/manhattan/species":case"/data/staten%20island/species":return{xKey:"count",yKey:"species"};default:throw new Error("Expecting a valid endpoint")}}function S(e,t,a){var n=[],r=Object.assign({},a);for(var c in r){var o;n.push((o={},Object(E.a)(o,t,c),Object(E.a)(o,e,r[c]),o))}return n}var C=function(e){var t=Object(n.useContext)(p),a=t.state,r=t.updateMessageFn,c=Object(n.useState)(""),o=Object(u.a)(c,2),s=o[0],l=o[1],i=Object(n.useState)(""),d=Object(u.a)(i,2),f=d[0],m=d[1],h=Object(n.useState)(!1),b=Object(u.a)(h,2),g=b[0],E=b[1],y=Object(n.useState)([]),O=Object(u.a)(y,2),w=O[0],C=O[1],T=a.endpoint,P=a.message;return Object(n.useEffect)((function(){""!==T&&""===P&&(E(!0),function(e,t){var a;return function(){clearTimeout(a),a=setTimeout((function(){e()}),t)}}(function(){var e=Object(x.a)(v.a.mark((function e(){var t,a,n,c,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N(T),a=t.xKey,n=t.yKey,e.prev=1,e.next=4,fetch("https://nyc-tree-data-fetcher.herokuapp.com"+T);case 4:if(c=e.sent,!(Math.floor(c.status/100)>=4)){e.next=12;break}return e.next=8,c.text();case 8:if("{"!==(o=e.sent)[0]){e.next=11;break}throw new Error(c.statusText);case 11:throw new Error(o);case 12:return e.next=14,c.json().then((function(e){return S(a,n,e.data)}));case 14:s=e.sent,C(s),l(a),m(n),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(1),r(e.t0.message),E(!1);case 24:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(){return e.apply(this,arguments)}}(),250)())}),[T,r,P]),Object(n.useEffect)((function(){0!==w.length&&(k(s,f,e)(w),E((function(e){return!1})))}),[w,s,f,e]),Object(n.useEffect)((function(){e&&""!==e&&function(e,t){t?j.h(e+" svg").style("display","none"):j.h(e+"svg").attr("visibility","visible")}(e,g)}),[e,g]),{isLoading:g}},T=function(e){var t=e.chartSelector,a=C(t).isLoading?r.a.createElement(g,null):null;return r.a.createElement(r.a.Fragment,null,a)},P=(a(82),Object(n.forwardRef)((function(e,t){var a=e.closeHandler;return e.shouldDisplay?o.a.createPortal(r.a.createElement("section",{role:"dialog","aria-modal":"true",className:"modal",tabIndex:-1,ref:t},r.a.createElement("header",{className:"modal-header"},r.a.createElement("h1",null,"About This Project"),r.a.createElement("button",{type:"button",className:"btn--close",onClick:a,"aria-label":"Close"},"\xd7")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("p",null,"This is a learning project meant to be both a practical application of Python/ Flask and as a learning project for ",r.a.createElement("a",{href:"https://d3js.org/",target:"_blank",rel:"noopener noreferrer"},"D3.js")," for data visualization."),r.a.createElement("p",null,"The data for this project comes from ",r.a.createElement("a",{href:"https://data.cityofnewyork.us/Environment/2015-Street-Tree-Census-Tree-Data/uvpi-gqnh",target:"_blank",rel:"noopener noreferrer"},"NYC Open Data's Tree Census"),". Granted just showing tree census data on it's own isn't exactly very exciting, but this is a start and there's plenty of ways to play with the data."),r.a.createElement("p",null,"Here's the repository for the ",r.a.createElement("a",{href:"https://github.com/wilsonj806/nyc-arbor-logger",target:"_blank",rel:"noopener noreferrer"},"React app")),r.a.createElement("p",null,"Here's the repository for the ",r.a.createElement("a",{href:"https://github.com/wilsonj806/nyc-tree-data-fetcher",target:"_blank",rel:"noopener noreferrer"},"Python/ Flask app")))),document.getElementById("portal")):null}))),A=(a(83),function(){var e=Object(n.useContext)(p).state.message,t=""===e?{background:"transparent"}:{background:"rgb(248, 30, 30)",boxShadow:"2px 2px 4px rgba(44, 44, 44, 0.25)"};return r.a.createElement("section",{className:"message",style:t,role:"alert"},r.a.createElement("p",null,e))});var D=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useRef)(null);return Object(n.useEffect)((function(){a&&o&&o.current&&o.current.focus()}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{ref:o,closeHandler:function(){return c(!1)},shouldDisplay:a}),r.a.createElement("div",{className:"App",onClick:function(e){var t=e.target;(a||"fab--info"===t.id)&&a&&c(!1)}},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"NYC Arbor Logger")),r.a.createElement(A,null),r.a.createElement(b,null),r.a.createElement("div",{id:"d3-stuff"},r.a.createElement(T,{chartSelector:"#d3-stuff"})),r.a.createElement("button",{className:"fab",id:"fab--info",onClick:function(){return c(!a)}},"?")))},F=r.a.createElement(f,null,r.a.createElement(D,null));o.a.render(F,document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.fe52cc67.chunk.js.map